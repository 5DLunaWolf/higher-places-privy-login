<script>
  // Add generateMnemonic function to bip39
  bip39.generateMnemonic = function () {
    const wordlist = bip39.wordlists.english;
    const words = [];
    for (let i = 0; i < 12; i++) {
      const index = Math.floor(Math.random() * wordlist.length);
      words.push(wordlist[index]);
    }
    return words.join(" ");
  };
</script>

<script>
  const checkInterval = setInterval(() => {
    if (typeof bip39 !== 'undefined' && typeof bip39.generateMnemonic === 'function') {
      document.getElementById('wallet-btn').disabled = false;
      clearInterval(checkInterval);
    }
  }, 300);

  function generateWallet() {
    if (typeof bip39 === 'undefined' || typeof bip39.generateMnemonic !== 'function') {
      alert("Wallet generator is still loading... please wait a moment and try again.");
      return;
    }
    const mnemonic = bip39.generateMnemonic();
    console.log("Your new wallet seed phrase:", mnemonic);
  }
</script>
</body>
